include comps/header.jade

div.container-fluid
  div.row-fluid
   div.span2 
   div.span10
      div.btn-group#company
        button.btn.btn-primary.dropdown-toggle(data-toggle="dropdown", type="button") Company
         span.caret
        ul.dropdown-menu(role="menu")
         li
          if(locals.companies)
            each company in locals.companies 
              a(href="/testcases/#{company}")= company
      if(locals.teams)
        div.btn-group#teams
          button.btn.btn-primary.dropdown-toggle(data-toggle="dropdown", type="button") Team 
           span.caret
          ul.dropdown-menu(role="menu")
           li
              each team in locals.teams 
                a(href="/testcases/#{company}/#{team}")= team 
      if(locals.components)
        div.btn-group#components
          button.btn.btn-primary.dropdown-toggle(data-toggle="dropdown", type="button") Components 
           span.caret
          ul.dropdown-menu(role="menu")
           li
              each component in locals.components 
                a(href="/testcases/#{company}/#{team}/#{component}")= component 


    if(locals.scenarios)
      div.table-responsive
        table.table.table-bordered#scenariosTable
          thead
            tr
             th#tc_id TC_ID
             th#tc_scenario TC_SCENARIO
          tbody
           each scenario in locals.scenarios
            tr(data-id="#{scenario.tc_id}", data-steps="#{scenario.tc_steps}", data-target=".scenario-modal")
             td= scenario.tc_id
             td= scenario.tc_scenario
      
      div.modal.scenario-modal(tabindex="-1", role="dialog")
        div.modal-dialog
          div.modal-content 
            div.modal-header
              button.close(type="button", data-dismiss="modal")
                span(aria-hidden="true") &times;
                span.sr-only close
              h4.modal-title Modal Title
            div.modal-body
              p Test body data
            div.modal-footer
              button.btn.btn-default(type="button", data-dismiss="modal") Close
              button.btn.btn-primary(type="button") Save Changes  

  script(type='text/javascript').
    //Sets labels on the dropdowns with the selected values ( based on url params )
    tessy.setDropDownText();
  
    //highlight row on click
    $("#scenariosTable tbody tr").on("click", function(evt){
      
       var row = evt.target.parentNode;
       if (row.className == 'success'){
         row.className = '';
       }else{
          row.className = 'success';
       } 

    });


    //show modal with steps on double click
    $("#scenariosTable tbody tr").on("dblclick", function(evt){

      var row   = evt.target.parentNode;
      var rowID = row.dataset.id; 
      $(".scenario-modal").modal();  

    });



include comps/footer.jade

